<div class="min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
  <div class="max-w-md w-full space-y-8">
    <div>
      <h2 class="mt-6 text-center text-3xl font-extrabold">
        Create your account
      </h2>
    </div>
    
    <p-toast position="top-center" key="register-toast"></p-toast>
    
    <p-card>
      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="space-y-6">
        <div>
          <label for="email" class="block text-sm font-medium">
            Email address
          </label>
          <div class="mt-1">
            <input
              id="email"
              type="email"
              pInputText
              formControlName="email"
              class="w-full"
              placeholder="Enter your email"
              [class.ng-invalid]="isFieldInvalid('email')"
              fluid
            />
          </div>
          <small 
            *ngIf="isFieldInvalid('email')" 
            class="p-error block mt-1"
          >
            @if (registerForm.controls.email.hasError('required')) {
              <ng-container>
                Email is required
              </ng-container>
            }
            @if (registerForm.controls.email.hasError('email')) {
              <ng-container>
                Please enter a valid email address
              </ng-container>
            }
          </small>
        </div>

        <div class="grid grid-cols-2 gap-4">
          <div>
            <label for="first_name" class="block text-sm font-medium">
              First Name
            </label>
            <div class="mt-1">
              <input
                id="first_name"
                type="text"
                pInputText
                formControlName="first_name"
                class="w-full"
                placeholder="First name"
                [class.ng-invalid]="isFieldInvalid('first_name')"
                fluid
              />
            </div>
            <small 
              *ngIf="isFieldInvalid('first_name')" 
              class="p-error block mt-1"
            >
              @if (registerForm.controls.first_name.hasError('required')) {
                <ng-container>
                  First name is required
                </ng-container>
              }
              @if (registerForm.controls.first_name.hasError('minlength')) {
                <ng-container>
                  First name must be at least 1 character
                </ng-container>
              }
              @if (registerForm.controls.first_name.hasError('maxlength')) {
                <ng-container>
                  First name must be less than 100 characters
                </ng-container>
              }
            </small>
          </div>

          <div>
            <label for="last_name" class="block text-sm font-medium">
              Last Name
            </label>
            <div class="mt-1">
              <input
                id="last_name"
                type="text"
                pInputText
                formControlName="last_name"
                class="w-full"
                placeholder="Last name"
                [class.ng-invalid]="isFieldInvalid('last_name')"
                fluid
              />
            </div>
            <small 
              *ngIf="isFieldInvalid('last_name')" 
              class="p-error block mt-1"
            >
              @if (registerForm.controls.last_name.hasError('required')) {
                <ng-container>
                  Last name is required
                </ng-container>
              }
              @if (registerForm.controls.last_name.hasError('minlength')) {
                <ng-container>
                  Last name must be at least 1 character
                </ng-container>
              }
              @if (registerForm.controls.last_name.hasError('maxlength')) {
                <ng-container>
                  Last name must be less than 100 characters
                </ng-container>
              }
            </small>
          </div>
        </div>

        <div>
          <label for="password" class="block text-sm font-medium">
            Password
          </label>
          <div class="mt-1">
            <p-password
              id="password"
              formControlName="password"
              [feedback]="true"
              [toggleMask]="true"
              placeholder="Enter your password"
              [class.ng-invalid]="isFieldInvalid('password')"
              styleClass="w-full"
              fluid
            ></p-password>
          </div>
          <small 
            *ngIf="isFieldInvalid('password')" 
            class="p-error block mt-1"
          >
            @if (registerForm.controls.password.hasError('required')) {
              <ng-container>
                Password is required
              </ng-container>
            }
            @if (registerForm.controls.password.hasError('minlength')) {
              <ng-container>
                Password must be at least 8 characters
              </ng-container>
            }
          </small>
        </div>

        <div>
          <label for="confirmPassword" class="block text-sm font-medium">
            Confirm Password
          </label>
          <div class="mt-1">
            <p-password
              id="confirmPassword"
              formControlName="confirmPassword"
              [feedback]="false"
              [toggleMask]="true"
              placeholder="Confirm your password"
              [class.ng-invalid]="isFieldInvalid('confirmPassword')"
              styleClass="w-full"
              fluid
            ></p-password>
          </div>
          <small 
            *ngIf="isFieldInvalid('confirmPassword')" 
            class="p-error block mt-1"
          >
            @if (registerForm.controls.confirmPassword.hasError('required')) {
              <ng-container>
                Please confirm your password
              </ng-container>
            }
            @if (registerForm.controls.confirmPassword.hasError('passwordMismatch')) {
              <ng-container>
                Passwords do not match
              </ng-container>
            }
          </small>
        </div>

        <div>
          <p-button
            type="submit"
            label="Create Account"
            [loading]="isLoading"
            [disabled]="registerForm.invalid || isLoading"
            styleClass="w-full"
          ></p-button>
        </div>

        <div class="text-center">
          <span class="text-sm">
            Already have an account? 
          </span>
          <a 
            [routerLink]="['/', 'login']" 
            class="text-sm font-medium"
          >
            Sign in here
          </a>
        </div>
      </form>
    </p-card>
  </div>
</div> 